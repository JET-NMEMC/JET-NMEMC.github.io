<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="number" name="" id="">

    <script>

        console.log("航迹速度", getspeed())
        function getspeed() {
            var Vt, Dt //船首
            var Vf, Df //水流
            var Vc, Dc //航迹

            Vt = 10.00, Dt = null;//船首
            Vf = 5.00, Df = 0;//水流
            Vc = null, Dc = 90;//航迹

            var A = angle_btw_2_Dir(Df, Dc).rad;
            console.log("水流与航迹夹角", angle_btw_2_Dir(Df, Dc).angle);
            // console.log("水流与航迹夹角", A);
            if (A == 0) {
                return Vt + Vf
            } else {
                sinA = Math.sin(A);
                cosA = Math.cos(A);
                sinB = (Vf * sinA) / Vt;
                cosB = Math.sqrt(1 - sinB * sinB);
                sinC = sinA * cosB + cosA * sinB;
                Vc = Vt * sinC / sinA;
                return Vc
            }
        }

        function getcurrent(lng, lat, time) {
            // var lng = 123, lat = 39, time = "2022-05-12 12:00"
            return {
                speed: 5 * Math.random(),
                direction: 360 * Math.random()
            }
        }

        function angle_btw_2_Dir(a, b) {
            let cha = Math.max(a, b) - Math.min(a, b);
            if (cha > 180) {
                cha = 360 - cha
            }
            return {
                angle: cha,
                rad: Math.PI * cha / 180
            }
        }


// 在三角形ABC中，由正弦定理得
// BC/sin∠A=AC/sin∠B
// 所以sin∠B=(AC*sin∠A)/BC=(2*根号3/2)/3=(根号3)/3
// 所以
// cos∠B=(根号6)/3
// 所以sin∠C=sin(180度-∠A-∠B)=sin(∠A+∠B)=sinAcosB+cosAsinB
// =(根号3/2)*(根号6/3)+1/2*(根号3/3)=(3倍根号2+根号3)/6
// 所以三角形ABC内，由正弦定理得
// AB/sinC=BC/sinA
// 所以
// AB=BC*sinC/sinA=[3*(3倍根号2+根号3)/6](根号3/2)
// =1+根号6
    </script>

</body>

</html>